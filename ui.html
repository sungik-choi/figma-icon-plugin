<h2>Bezier Figma Plugin</h2>
<button id="extract">Extract Icon</button>
<button id="cancel">Cancel</button>
<script>

document.getElementById('extract').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'extract' } }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

onmessage = async ({ data: { pluginMessage: { type, payload } }}) => {
  if (type === 'fetchSvg') {
    fetch(payload.url, {
      headers: {
        'Content-Type': 'application/json',
        'X-Figma-Token': payload.token
      }
    })
      .then(response => response.json())
      .then(({ images }) => {
        parent.postMessage({ pluginMessage: { type: 'fetchSvgSuccess', payload: images } }, '*')
      })
  }
}

</script>
